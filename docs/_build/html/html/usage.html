
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Usage &#8212; Fuzzy SQL User Guide 1.0.0-beta documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Functions" href="functions.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="usage">
<h1>Usage<a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h1>
<section id="schema">
<h2>Schema<a class="headerlink" href="#schema" title="Permalink to this heading">¶</a></h2>
<p>Whether tabular or longitudinal, data is passed to the main class of Fuzzy SQL and other functions as a list of individual tables. Each table shall be accompanied with its metadata dictionary which is typically read from a json file. The metadata dictionary includes the details about each variable in the corresponding table, any parent tables and their joining keys. For tabular data, the description of the parent tables can be simply omitted. Here are two hypothetical examples to clarify that.</p>
<ul>
<li><p>Tabular dataset:</p>
<blockquote>
<div><p>Assume that a tabular dataset is already imported into the Sqlite database as a table named <strong>T</strong> . The table <strong>T</strong> has two categorical variables <cite>t1</cite> and <cite>t2</cite> and one continuous variable <cite>t3</cite>.  The metadata dictionary for <strong>T</strong>, namely <strong>T_metadata</strong> will look like the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">T_metadata</span><span class="o">=</span><span class="p">{</span>
    <span class="s2">&quot;table_name&quot;</span><span class="p">:</span><span class="s2">&quot;T&quot;</span><span class="p">,</span>
    <span class="s2">&quot;table_vars&quot;</span><span class="p">:[</span>
        <span class="p">[</span><span class="s2">&quot;t1&quot;</span><span class="p">:</span><span class="s2">&quot;categorical&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;t2&quot;</span><span class="p">:</span><span class="s2">&quot;categorical&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;t3&quot;</span><span class="p">:</span><span class="s2">&quot;continuous&quot;</span><span class="p">]</span>
        <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The table name is passed to any applicable functions in Fuzzy SQL as a list. For instance, consider generating multiple random queries using the function <cite>gen_queries</cite> in <a class="reference internal" href="functions.html"><span class="doc">Functions</span></a> , you need to pass the table name as a list of single item, i.e. <cite>real_tbl_lst=[‘T’]</cite>. Similarly, you pass its metadata as a list i.e. <cite>metadata_lst=[T_metadata]</cite>.</p>
<p>Finally, any synthetic table names shall be passed in an identical way to that is used in passing real table names, i.e. in a form of list of table names. Please refer to <a class="reference internal" href="#code-examples"><span class="std std-ref">Code examples</span></a> for detailed code examples.</p>
</div></blockquote>
</li>
<li><p>Longitudinal dataset:</p>
<blockquote>
<div><p>Assume that a longitudinal dataset has a parent table <strong>P</strong>  and a child table <strong>C</strong> that were already imported under the same names into the Sqlite database. <strong>P</strong> has the categorical variables <cite>p1</cite> and the continuous variable <cite>p2</cite>, while <strong>C</strong> has the categorical variables <cite>c1</cite>, <cite>c2</cite> and <cite>c3</cite>. The parent and child table are linked using the variables <cite>p1</cite> and <cite>c1</cite> respectively. The metadata dictionary corresponding to <strong>P</strong> will look like the following:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">P_metadata</span><span class="o">=</span><span class="p">{</span>
    <span class="s2">&quot;table_name&quot;</span><span class="p">:</span><span class="s2">&quot;P&quot;</span><span class="p">,</span>
    <span class="s2">&quot;table_vars&quot;</span><span class="p">:[</span>
        <span class="p">[</span><span class="s2">&quot;p1&quot;</span><span class="p">:</span><span class="s2">&quot;categorical&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;p2&quot;</span><span class="p">:</span><span class="s2">&quot;continuous&quot;</span><span class="p">]</span>
        <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>while the dictionary corresponding to <strong>C</strong> will look like:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">C_metadata</span><span class="o">=</span><span class="p">{</span>
    <span class="s2">&quot;table_name&quot;</span><span class="p">:</span><span class="s2">&quot;C&quot;</span><span class="p">,</span>
    <span class="s2">&quot;table_vars&quot;</span><span class="p">:[</span>
        <span class="p">[</span><span class="s2">&quot;c1&quot;</span><span class="p">:</span><span class="s2">&quot;categorical&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;c2&quot;</span><span class="p">:</span><span class="s2">&quot;categorical&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="s2">&quot;c3&quot;</span><span class="p">:</span><span class="s2">&quot;categorical&quot;</span><span class="p">]</span>
        <span class="p">],</span>
    <span class="s2">&quot;parent_details&quot;</span><span class="p">:{</span>
        <span class="s2">&quot;T&quot;</span><span class="p">:[[</span><span class="s2">&quot;p1&quot;</span><span class="p">],[</span><span class="s2">&quot;c1&quot;</span><span class="p">]]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>Notice that the above schema allows the addition of several parent tables as well as composite keys to be provided as list entries.</p>
<p>The table names are passed to various functions in Fuzzy SQL as a list of tables. For instance, consider generating multiple random queries using the function <cite>gen_queries</cite>, you can pass the dataset table names and dataset_dictionaries as lists of multiple items, i.e. <cite>real_tbl_lst=[‘P’,’T’]</cite> and <cite>metadata_lst=[P_metadata, C_metadata]</cite> respectively. Please refer to <a class="reference internal" href="#code-examples"><span class="std std-ref">Code examples</span></a> for detailed code examples. The metadata schema can checked by accessing the class method: <cite>RndQry._get_metdata_schema(self)</cite>.</p>
</div></blockquote>
</li>
</ul>
</section>
<section id="data-types">
<h2>Data Types<a class="headerlink" href="#data-types" title="Permalink to this heading">¶</a></h2>
<p>To ensure the validity of the SQL select statement as interpreted by the database engine, Fuzzy SQL makes a distinction among three basic data types, namely: Categorical, Continuous and Date. Accordingly, if a dataset includes a variable with a different data type, it will be mapped to the proper type as per the table below:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Input Data Type</p></th>
<th class="head"><p>Output Data Type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>‘qualitative’, ‘categorical’, ‘nominal’, ‘discrete’, ‘ordinal’, ‘dichotomous’, ‘TEXT’, ‘INTEGER’</p></td>
<td><p>‘categorical’</p></td>
</tr>
<tr class="row-odd"><td><p>‘quantitative’, ‘continuous’, ‘interval’, ‘ratio’,  ‘REAL’</p></td>
<td><p>‘continuous’</p></td>
</tr>
<tr class="row-even"><td><p>‘date’, ‘time’, ‘datetime’</p></td>
<td><p>‘date’</p></td>
</tr>
</tbody>
</table>
</section>
<section id="code-examples">
<span id="id1"></span><h2>Code examples<a class="headerlink" href="#code-examples" title="Permalink to this heading">¶</a></h2>
<p>Usage is best explained using real examples from various datasets. Please follow the steps below to install and run the examples:</p>
<ol class="arabic">
<li><p>Download and unzip the file from the link below:</p>
<blockquote>
<div><p><a class="reference external" href="https://ehealthinformation-my.sharepoint.com/:u:/g/personal/skababji_ehealthinformation_ca/Ec6Paj0ypqNHm6_4cHn2qP4Br-ek5L6WGUGNar_tEf3oHQ?e=Nzrcxa">https://ehealthinformation-my.sharepoint.com/:u:/g/personal/skababji_ehealthinformation_ca/Ec6Paj0ypqNHm6_4cHn2qP4Br-ek5L6WGUGNar_tEf3oHQ?e=Nzrcxa</a></p>
</div></blockquote>
</li>
<li><p>Navigate to the folder that contains the python files <cite>main_sdgd.py, main_cal.py, main_cms.py and main_cms_tuned.py</cite>. Each file is a standalone example and generates random queries corresponding to the following datasets:</p>
<blockquote>
<div><ul class="simple">
<li><p>sdgd: Tabular dataset</p></li>
<li><p>cal: Longitudinal dataset with single child</p></li>
<li><p>cms: Longitudinal dataset with multiple-child</p></li>
</ul>
</div></blockquote>
</li>
<li><p>In the directory above, create your virtual environment as explained in <a class="reference internal" href="installation.html"><span class="doc">Installation</span></a> . This is repeated here for convenience assuming a Linux system:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python3 -m venv .
<span class="gp">$ </span><span class="nb">source</span> bin/activate
<span class="gp">$ </span>pip install --upgrade pip
<span class="gp">$ </span>pip install git+ssh://git@github.com/skababji-ehil/fuzzy_sql.git@v1.0.0-beta#egg<span class="o">=</span>fuzzy_sql
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Run each of the four scripts using your activated environment above. The scripts are self-explanatory and include various useful comments.</p></li>
</ol>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Fuzzy SQL User Guide</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="functions.html">Functions</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#schema">Schema</a></li>
<li class="toctree-l2"><a class="reference internal" href="#data-types">Data Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="#code-examples">Code examples</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="functions.html" title="previous chapter">Functions</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;EHIL 2022.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.3.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/usage.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>